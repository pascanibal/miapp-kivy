name: ğŸ“¦ Build Kivy APK

on:
  push:
    branches: [ main, master ]

jobs:
  build-debug:
    runs-on: ubuntu-latest

    steps:
      - name: âœ… Checkout repo
        uses: actions/checkout@v3

      - name: ğŸ› ï¸ Instalar dependencias del sistema
        run: |
          sudo apt update
          sudo apt install -y openjdk-11-jdk unzip zip

      - name: ğŸ Instalar Python y Buildozer
        run: |
          python3 -m pip install --upgrade pip setuptools cython
          python3 -m pip install buildozer

      - name: âš™ï¸ Inicializar Buildozer
        run: buildozer init

      - name: ğŸ“² Compilar APK (debug)
        run: |
          export BUILDOZER_ALLOW_RUN_AS_ROOT=1
          buildozer android debug --non-interactive

      - name: ğŸ“¤ Subir APK como artifact
        uses: actions/upload-artifact@v3
        with:
          name: miapp-debug-apk
          path: bin/*.apk
